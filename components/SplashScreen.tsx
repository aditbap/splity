'use client';

import { motion } from 'framer-motion';
import { useEffect, useState } from 'react';

interface SplashScreenProps {
    onComplete: () => void;
}

// Logo Path Data (Split into Text and Dot for separate coloring)
const pathText = "M14.212 15.428C13.7307 15.0227 12.8947 14.4907 11.704 13.832C10.5387 13.148 9.63933 12.806 9.006 12.806C8.49933 12.806 8.246 13.0593 8.246 13.566C8.246 13.7433 8.30933 14.0473 8.436 14.478C8.61333 15.0607 9.006 15.618 9.614 16.15C10.222 16.6567 11.02 17.252 12.008 17.936C12.8187 18.4933 13.338 18.8733 13.566 19.076C14.6807 20.0387 15.5673 20.8493 16.226 21.508C16.8847 22.1413 17.48 22.9013 18.012 23.788C18.5693 24.6493 18.848 25.536 18.848 26.448C18.848 27.056 18.696 27.6893 18.392 28.348C17.8093 29.5387 16.8467 30.4507 15.504 31.084C14.1867 31.7173 12.7807 32.034 11.286 32.034C10.7793 32.034 10.2727 31.996 9.766 31.92C6.32066 31.3373 3.14133 29.0447 0.227995 25.042C0.075995 24.814 -4.96581e-06 24.586 -4.96581e-06 24.358C-4.96581e-06 23.8007 0.367328 23.294 1.102 22.838C1.862 22.3567 2.60933 22.116 3.344 22.116C3.90133 22.116 4.30666 22.2807 4.56 22.61C6.13066 24.738 7.676 26.296 9.196 27.284C10.5893 28.196 11.7673 28.652 12.73 28.652C13.5153 28.652 13.908 28.31 13.908 27.626C13.908 27.1447 13.718 26.5493 13.338 25.84C12.958 25.156 12.464 24.51 11.856 23.902C11.248 23.294 10.4753 22.5973 9.538 21.812L8.512 20.938C8.41066 20.8367 7.942 20.4693 7.106 19.836C6.422 19.3293 5.83933 18.8607 5.358 18.43C4.87666 17.9993 4.47133 17.5307 4.142 17.024C3.71133 16.34 3.496 15.6307 3.496 14.896C3.496 13.756 3.97733 12.7173 4.94 11.78C5.928 10.8173 7.05533 10.1587 8.322 9.804C9.13266 9.576 9.90533 9.462 10.64 9.462C12.008 9.462 13.3253 9.77866 14.592 10.412C15.884 11.0453 17.1887 11.9193 18.506 13.034C18.734 13.2113 18.848 13.4267 18.848 13.68C18.848 14.1613 18.4553 14.63 17.67 15.086C16.8847 15.542 16.112 15.77 15.352 15.77C14.8453 15.77 14.4653 15.656 14.212 15.428ZM31.1739 21.09C31.5539 20.1273 31.7439 19.2027 31.7439 18.316C31.7439 17.1507 31.4146 16.2007 30.7559 15.466C29.7679 14.3007 28.1086 13.7433 25.7779 13.794C25.3219 17.7967 24.9673 22.6227 24.7139 28.272C26.1579 27.512 27.4499 26.5113 28.5899 25.27C29.7299 24.0033 30.5913 22.61 31.1739 21.09ZM26.1579 10.83C26.4366 10.8047 26.8673 10.792 27.4499 10.792C30.5406 10.792 32.8459 11.552 34.3659 13.072C35.5059 14.1867 36.0759 15.618 36.0759 17.366C36.0759 18.278 35.8733 19.3673 35.4679 20.634C34.6319 23.0153 33.2386 25.156 31.2879 27.056C29.3373 28.9307 27.1079 30.362 24.5999 31.35C24.4986 33.934 24.4226 36.1887 24.3719 38.114C24.3213 40.0647 24.2833 41.686 24.2579 42.978C24.2326 46.0687 24.1566 49.172 24.0299 52.288C24.0046 52.82 23.6246 53.2887 22.8899 53.694C22.1553 54.0993 21.4079 54.302 20.6479 54.302C19.7613 54.302 19.3179 53.9727 19.3179 53.314L19.3559 50.274C19.3813 49.286 19.4193 46.9047 19.4699 43.13C19.5459 39.3553 19.6599 35.834 19.8119 32.566C19.1279 32.642 18.4566 32.68 17.7979 32.68C17.3166 32.68 16.9619 32.604 16.7339 32.452C16.4806 32.3 16.3539 32.0973 16.3539 31.844C16.3539 31.388 16.6706 30.9067 17.3039 30.4C17.9119 29.8933 18.5326 29.64 19.1659 29.64C19.5206 29.64 19.7739 29.6273 19.9259 29.602C20.2046 24.1553 20.6353 18.924 21.2179 13.908C21.0406 13.8067 20.9519 13.642 20.9519 13.414C20.9519 13.11 21.1166 12.7553 21.4459 12.35C21.4459 12.198 21.4713 11.9447 21.5219 11.59C21.5979 11.058 22.0033 10.602 22.7379 10.222C23.4726 9.81666 24.1819 9.614 24.8659 9.614C25.2966 9.614 25.6259 9.70266 25.8539 9.88C26.1073 10.0573 26.2086 10.3233 26.1579 10.678V10.83ZM40.4658 1.9C40.5165 1.41866 40.9218 0.987996 41.6818 0.607997C42.4418 0.202664 43.1638 -2.38419e-06 43.8478 -2.38419e-06C44.6585 -2.38419e-06 45.0512 0.303997 45.0258 0.911997C44.6205 5.44666 43.9492 11.704 43.0118 19.684C42.4038 25.1307 42.0112 28.6647 41.8338 30.286C41.7832 30.818 41.3778 31.2993 40.6178 31.73C39.8832 32.1353 39.1612 32.338 38.4518 32.338C37.4638 32.338 37.0078 31.9707 37.0838 31.236C37.9705 22.5213 39.0978 12.7427 40.4658 1.9ZM47.0876 11.59C47.113 11.0833 47.4803 10.64 48.1896 10.26C48.899 9.85466 49.6083 9.652 50.3176 9.652C50.723 9.652 51.0523 9.74066 51.3056 9.918C51.559 10.07 51.673 10.3233 51.6476 10.678L50.5456 31.312C50.5203 31.844 50.153 32.3127 49.4436 32.718C48.7343 33.098 48.025 33.288 47.3156 33.288C46.3783 33.288 45.9223 32.9207 45.9476 32.186L47.0876 11.59ZM47.0116 6.574C46.961 6.92866 47.0496 7.19466 47.2776 7.372C47.531 7.54933 47.8603 7.638 48.2656 7.638C48.9496 7.638 49.6463 7.448 50.3556 7.068C51.065 6.688 51.4576 6.232 51.5336 5.7C51.7363 4.43333 51.8756 3.48333 51.9516 2.85C52.053 2.21666 51.6603 1.9 50.7736 1.9C50.0896 1.9 49.3803 2.09 48.6456 2.47C47.911 2.85 47.5183 3.28066 47.4676 3.762L47.0116 6.574ZM65.0682 9.386C65.6002 9.33533 66.0055 9.39866 66.2842 9.576C66.5882 9.75333 66.9048 10.0953 67.2342 10.602C67.4368 10.9313 67.5382 11.21 67.5382 11.438C67.5382 11.9953 67.1835 12.3247 66.4742 12.426L65.1442 12.578C63.9028 12.7553 63.2442 12.844 63.1682 12.844C62.7375 16.8973 62.3955 20.4187 62.1422 23.408C61.8888 26.3973 61.7242 29.3487 61.6482 32.262C61.6228 32.6167 61.4708 32.8827 61.1922 33.06C60.9388 33.2373 60.5968 33.326 60.1662 33.326C59.4062 33.326 58.6462 33.1233 57.8862 32.718C57.1515 32.2873 56.7968 31.806 56.8222 31.274C56.8982 28.5887 57.0502 25.8527 57.2782 23.066C57.5062 20.254 57.8102 16.9987 58.1902 13.3L55.7962 13.604C55.4415 13.6293 55.1628 13.6167 54.9602 13.566C54.7828 13.49 54.6055 13.338 54.4282 13.11C54.2508 12.882 54.0735 12.6287 53.8962 12.35C53.6935 12.0713 53.5922 11.7927 53.5922 11.514C53.5922 11.286 53.6808 11.0833 53.8582 10.906C54.0355 10.7287 54.3015 10.6147 54.6562 10.564C55.2135 10.488 55.8595 10.3993 56.5942 10.298L58.5322 10.032L59.2162 3.458C59.2922 2.74866 59.8115 2.394 60.7742 2.394C61.5342 2.394 62.2688 2.60933 62.9782 3.04C63.7128 3.44533 64.0548 3.914 64.0042 4.446L63.5102 9.538C64.2195 9.48733 64.7388 9.43666 65.0682 9.386ZM75.4104 10.26C75.3597 9.728 75.6891 9.25933 76.3984 8.854C77.1331 8.42333 77.8551 8.208 78.5644 8.208C79.3497 8.208 79.7804 8.474 79.8564 9.006C80.4137 13.0593 80.8444 16.5427 81.1484 19.456C81.4524 22.3693 81.6044 25.2573 81.6044 28.12C81.6044 31.9707 81.3004 35.378 80.6924 38.342C80.2111 40.698 79.5144 42.8133 78.6024 44.688C77.6904 46.5627 76.4364 48.0193 74.8404 49.058C73.5231 49.894 72.1931 50.312 70.8504 50.312C69.6091 50.312 68.3931 49.9827 67.2024 49.324C66.0117 48.6907 64.8971 47.8167 63.8584 46.702C63.6557 46.4487 63.5544 46.2333 63.5544 46.056C63.5544 45.5493 63.9217 45.068 64.6564 44.612C65.3657 44.1813 66.0877 43.966 66.8224 43.966C67.3291 43.966 67.7217 44.1053 68.0004 44.384C68.1271 44.5107 68.4311 44.8273 68.9124 45.334C69.3937 45.8407 69.8877 46.2713 70.3944 46.626C70.9264 46.9807 71.4077 47.158 71.8384 47.158C72.0664 47.158 72.2311 47.1327 72.3324 47.082C72.8137 46.9047 73.2317 46.4867 73.5864 45.828C73.9664 45.1693 74.2704 44.5613 74.4984 44.004C74.7264 43.4467 74.8657 43.1047 74.9164 42.978C75.5244 41.458 75.9677 39.8493 76.2464 38.152C76.5251 36.48 76.7151 34.6053 76.8164 32.528C76.8671 30.9067 76.8924 29.678 76.8924 28.842C76.2337 30.0327 75.4611 30.97 74.5744 31.654C73.6877 32.3127 72.6111 32.642 71.3444 32.642C69.5457 32.642 68.3677 31.844 67.8104 30.248C67.2784 28.6267 66.9997 26.6507 66.9744 24.32L66.9364 22.8C66.9364 18.848 67.3417 15.1367 68.1524 11.666C68.2537 11.1847 68.6844 10.754 69.4444 10.374C70.2044 9.994 70.9264 9.804 71.6104 9.804C71.9651 9.804 72.2437 9.88 72.4464 10.032C72.6491 10.184 72.7251 10.3993 72.6744 10.678C72.0917 13.6167 71.7244 16.796 71.5724 20.216C71.5217 21.28 71.4964 22.1033 71.4964 22.686C71.4964 23.6487 71.5597 24.7253 71.6864 25.916C71.8384 26.98 72.0157 27.74 72.2184 28.196L72.5224 28.804C72.6997 28.4747 72.9404 27.9807 73.2444 27.322C73.8777 25.7007 74.3844 23.75 74.7644 21.47L75.1064 19.608C75.5877 17.3533 75.8284 15.5673 75.8284 14.25C75.8284 13.5913 75.8031 13.0973 75.7524 12.768L75.4104 10.26Z";
const pathDot = "M88.7312 28.918C88.9592 29.07 89.1365 29.2727 89.2632 29.526C89.3898 29.7793 89.4532 30.0453 89.4532 30.324C89.4532 30.552 89.4152 30.78 89.3392 31.008C89.1112 31.5907 88.5412 32.1353 87.6292 32.642C86.7425 33.1233 85.8432 33.364 84.9312 33.364C84.2218 33.364 83.6645 33.212 83.2592 32.908C82.9298 32.68 82.7652 32.3 82.7652 31.768C82.7652 31.4133 82.8665 31.0967 83.0692 30.818C83.5252 30.0833 84.2978 29.5513 85.3872 29.222L85.6532 29.108C86.2865 28.8293 86.8565 28.6773 87.3632 28.652H87.6672C88.1232 28.652 88.4778 28.7407 88.7312 28.918Z";

export default function SplashScreen({ onComplete }: SplashScreenProps) {
    const [animationComplete, setAnimationComplete] = useState(false);

    useEffect(() => {
        const timer = setTimeout(() => {
            setAnimationComplete(true);
            setTimeout(onComplete, 500);
        }, 3000); // Animation duration
        return () => clearTimeout(timer);
    }, [onComplete]);

    // Wave Path (Simulates liquid surface)
    // A sine wave that will be translated up and horizontally
    const wavePath = "M 0 55 H 200 V 110 H 0 V 55 Z M 0 55 C 20 65 30 45 50 55 C 70 65 80 45 100 55 C 120 65 130 45 150 55 C 170 65 180 45 200 55 V 150 H 0 Z";

    // Better Wave: A repeating sine loop
    // ViewBox is 0 0 90 55. We need it to be wider to scroll.
    // Let's make a simple rect that moves up, and mask it with a wave?
    // Or just animate opacity/fill? No, user wants "Liquid From Bottom".

    // Let's actally render the wave Shape inside the ClipPath.
    return (
        <motion.div
            className="fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center p-6"
            initial={{ opacity: 1 }}
            animate={{ opacity: animationComplete ? 0 : 1 }}
            transition={{ duration: 0.5 }}
        >
            <div className="relative w-[180px] h-[110px]">
                <svg width="180" height="110" viewBox="0 0 90 55">
                    <defs>
                        <clipPath id="logoClipText">
                            <path d={pathText} />
                        </clipPath>
                        <clipPath id="logoClipDot">
                            <path d={pathDot} />
                        </clipPath>
                    </defs>

                    {/* Dimmed Background */}
                    <path d={pathText} fill="white" className="opacity-20" />
                    <path d={pathDot} fill="#FFCB45" className="opacity-20" />

                    {/* Liquid Fill - Text (White) */}
                    <g clipPath="url(#logoClipText)">
                        <motion.rect
                            x="0"
                            y="110" // Start far below
                            width="200"
                            height="200"
                            fill="white"
                            initial={{ y: 60 }}
                            animate={{ y: -60 }}
                            transition={{ duration: 2.5, ease: "easeInOut" }}
                        />
                        {/* Add a generic "wave" moving horizontally on top of the rect? 
                            Ideally we'd animate a path, but rect is simpler for reliable "fill".
                            Let's try a wave PATH that moves UP.
                        */}
                    </g>

                    {/* Liquid Fill - Wave Overlay for Text */}
                    <g clipPath="url(#logoClipText)">
                        <motion.path
                            d="M-100 0 Q-50 10 0 0 T 100 0 T 200 0 V 100 H -100 Z"
                            fill="white"
                            initial={{ y: 60, x: -50 }}
                            animate={{
                                y: -10, // Move Up
                                x: 0    // Ripple
                            }}
                            transition={{
                                y: { duration: 2.5, ease: "easeInOut" },
                                x: { duration: 1, repeat: Infinity, ease: "linear" }
                            }}
                        />
                    </g>

                    {/* Liquid Fill - Dot (Yellow) */}
                    <g clipPath="url(#logoClipDot)">
                        <motion.path
                            d="M-100 0 Q-50 10 0 0 T 100 0 T 200 0 V 100 H -100 Z"
                            fill="#FFCB45"
                            initial={{ y: 60, x: -50 }}
                            animate={{
                                y: -10, // Move Up
                                x: 0    // Ripple
                            }}
                            transition={{
                                y: { duration: 2.5, ease: "easeInOut" },
                                x: { duration: 1, repeat: Infinity, ease: "linear" }
                            }}
                        />
                    </g>
                </svg>
            </div>

            <p className="absolute bottom-10 text-xs text-neutral-600 font-medium">
                Made from kerala ðŸŒ´ by <span className="text-yellow-500">Zythos.co</span>
            </p>
        </motion.div>
    );
}
